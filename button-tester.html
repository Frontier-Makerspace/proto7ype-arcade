<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Arcade Button Tester</title>
<style>
body{
  margin:0;
  padding:40px;
  background:#000;
  color:#0f0;
  font-family:monospace;
  font-size:20px;
}
h1{
  color:#0ff;
  text-align:center;
  font-size:48px;
  margin-bottom:40px;
}
.instructions{
  color:#ff0;
  font-size:24px;
  margin-bottom:30px;
  text-align:center;
}
#output{
  max-width:1200px;
  margin:0 auto;
}
.button{
  margin:5px 0;
  padding:15px;
  background:#111;
  border:2px solid #0f0;
  border-radius:5px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.button.pressed{
  background:#0f0;
  color:#000;
  font-weight:bold;
  border-color:#0ff;
  box-shadow:0 0 20px #0f0;
  animation:pulse 0.3s;
}
@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.05);}
}
.button-label{
  font-size:24px;
}
.button-value{
  font-size:18px;
}
.highlight{
  color:#f0f;
  font-weight:bold;
  font-size:28px;
}
.axes{
  margin-top:40px;
  padding-top:40px;
  border-top:2px solid #0f0;
}
.gamepad-container{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:30px;
  margin:20px 0;
}
.gamepad-section{
  border:3px solid #0f0;
  border-radius:10px;
  padding:20px;
  background:#050505;
}
.gamepad-section.p1{
  border-color:#0f0;
}
.gamepad-section.p2{
  border-color:#0ff;
}
.gamepad-section.p2 .button{
  border-color:#0ff;
}
.gamepad-section.p2 .button.pressed{
  background:#0ff;
  border-color:#0ff;
  box-shadow:0 0 20px #0ff;
}
.gamepad-header{
  font-size:32px;
  font-weight:bold;
  text-align:center;
  margin-bottom:20px;
  padding-bottom:15px;
  border-bottom:2px solid;
}
.gamepad-section.p1 .gamepad-header{
  color:#0f0;
  border-bottom-color:#0f0;
}
.gamepad-section.p2 .gamepad-header{
  color:#0ff;
  border-bottom-color:#0ff;
}
.status{
  text-align:center;
  font-size:20px;
  padding:20px;
  color:#f00;
}
</style>
</head>
<body>
<h1>üéÆ ARCADE DUAL CONTROLLER TESTER</h1>
<div class="instructions">
  Press buttons on your arcade cabinet to see their numbers<br>
  <span class="highlight">Gamepad 0: COIN/START | Gamepad 1: 1P/2P SELECT</span>
</div>
<div id="output"></div>

<script>
const output = document.getElementById('output');
let lastPressed0 = [];
let lastPressed1 = [];

function updateGamepad(){
  const gamepads = navigator.getGamepads();
  const gp0 = gamepads[0];
  const gp1 = gamepads[1];
  
  let html = '<div class="gamepad-container">';
  
  // Gamepad 0 Section (Main Controller)
  html += '<div class="gamepad-section p1">';
  html += '<div class="gamepad-header">üéÆ GAMEPAD 0<br>MAIN CONTROLLER</div>';
  
  if(!gp0){
    html += '<div class="status">‚ùå Not Connected</div>';
  } else {
    html += `<div style="color:#0f0; font-size:18px; margin-bottom:15px; text-align:center;">ID: ${gp0.id}</div>`;
    
    const currentPressed0 = [];
    gp0.buttons.forEach((btn, i) => {
      const pressed = btn.pressed ? ' pressed' : '';
      const label = getButtonLabel0(i);
      html += `<div class="button${pressed}">
        <div class="button-label">Button ${i}${label}</div>
        <div class="button-value">${btn.pressed ? 'üî• PRESSED!' : ''}</div>
      </div>`;
      
      if(btn.pressed && !lastPressed0.includes(i)){
        console.log(`GP0 Button ${i} pressed${label}`);
        currentPressed0.push(i);
      }
    });
    lastPressed0 = currentPressed0;
    
    // Show axes for GP0
    if(gp0.axes.length > 0){
      html += '<div class="axes"><div style="color:#0f0; font-size:20px; margin-bottom:10px;">Joystick:</div>';
      gp0.axes.forEach((axis, i) => {
        const val = axis.toFixed(3);
        const moving = Math.abs(axis) > 0.2 ? ' pressed' : '';
        html += `<div class="button${moving}">
          <div class="button-label">Axis ${i} ${getAxisLabel(i)}</div>
          <div class="button-value">${val}</div>
        </div>`;
      });
      html += '</div>';
    }
  }
  html += '</div>';
  
  // Gamepad 1 Section (Player Select)
  html += '<div class="gamepad-section p2">';
  html += '<div class="gamepad-header">üéÆ GAMEPAD 1<br>1P/2P SELECT</div>';
  
  if(!gp1){
    html += '<div class="status">‚ùå Not Connected</div>';
  } else {
    html += `<div style="color:#0ff; font-size:18px; margin-bottom:15px; text-align:center;">ID: ${gp1.id}</div>`;
    
    const currentPressed1 = [];
    gp1.buttons.forEach((btn, i) => {
      const pressed = btn.pressed ? ' pressed' : '';
      const label = getButtonLabel1(i);
      html += `<div class="button${pressed}">
        <div class="button-label">Button ${i}${label}</div>
        <div class="button-value">${btn.pressed ? 'üî• PRESSED!' : ''}</div>
      </div>`;
      
      if(btn.pressed && !lastPressed1.includes(i)){
        console.log(`GP1 Button ${i} pressed${label}`);
        currentPressed1.push(i);
      }
    });
    lastPressed1 = currentPressed1;
    
    // Show axes for GP1
    if(gp1.axes.length > 0){
      html += '<div class="axes"><div style="color:#0ff; font-size:20px; margin-bottom:10px;">Joystick:</div>';
      gp1.axes.forEach((axis, i) => {
        const val = axis.toFixed(3);
        const moving = Math.abs(axis) > 0.2 ? ' pressed' : '';
        html += `<div class="button${moving}">
          <div class="button-label">Axis ${i} ${getAxisLabel(i)}</div>
          <div class="button-value">${val}</div>
        </div>`;
      });
      html += '</div>';
    }
  }
  html += '</div>';
  
  html += '</div>';
  output.innerHTML = html;
}

function getButtonLabel0(i){
  const labels = {
    0: ' (Button 0)',
    1: ' (Button 1)',
    2: ' ü™ô COIN',
    3: ' ‚ñ∂Ô∏è START',
    4: ' ‚¨áÔ∏è DOWN',
    5: ' ‚¨ÖÔ∏è LEFT',
    6: ' ‚û°Ô∏è RIGHT',
    7: ' ‚¨ÜÔ∏è UP',
    8: ' üî´ ACTION 1 (P1)',
    9: ' üî´ ACTION 2 (P1)',
    10: ' (Button 10)',
    11: ' (Button 11)',
    12: ' (Button 12)',
    13: ' (Button 13)',
    14: ' (Button 14)',
    15: ' (Button 15)',
  };
  return labels[i] || '';
}

function getButtonLabel1(i){
  const labels = {
    0: ' (Button 0)',
    1: ' (Button 1)',
    2: ' üî´ ACTION 1 (P2)',
    3: ' üî´ ACTION 2 (P2)',
    4: ' ‚¨áÔ∏è DOWN',
    5: ' ‚¨ÖÔ∏è LEFT',
    6: ' ‚û°Ô∏è RIGHT',
    7: ' ‚¨ÜÔ∏è UP',
    8: ' üéÆ 1P SELECT',
    9: ' üéÆ 2P SELECT',
    10: ' (Button 10)',
    11: ' (Button 11)',
    12: ' (Button 12)',
    13: ' (Button 13)',
    14: ' (Button 14)',
    15: ' (Button 15)',
  };
  return labels[i] || '';
}

function getAxisLabel(i){
  const labels = {
    0: ' (Left/Right)',
    1: ' (Up/Down)',
  };
  return labels[i] || '';
}

setInterval(updateGamepad, 50);
</script>
</body>
</html>